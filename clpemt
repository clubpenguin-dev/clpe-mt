#!/bin/bash

# dont touch add later
load_config() {
    if [[ -f config.cfg ]]; then
        source config.cfg
    fi
}

# package manger detector please if you have one that isnt one of these managers add it please im not going to these are the most common ones and i added dnf as i use fedora
detect_package_manager() {
    if [[ -n "$DEFAULT_PM" ]]; then
        PM=$DEFAULT_PM
    else
        if command -v apt &> /dev/null; then
            PM="apt"
        elif command -v dnf &> /dev/null; then
            PM="dnf"
        elif command -v pacman &> /dev/null; then
            PM="pacman"
        else
            echo "Unsupported package manager."
            exit 1
        fi
    fi
}

# yippe title
display_title() {
    clear
    echo "====================="
    echo "   CLPE Multitool    "
    echo "====================="
}



# help menu
display_help() {
    echo "CLPE Multitool Help Menu"
    echo "======================="
    echo "1) System Monitoring"
    echo "   1) System Info: Display system information using neofetch."
    echo "   2) Disk Usage: Show disk usage of mounted filesystems."
    echo "   3) Memory Usage: Display memory usage statistics."
    echo "   4) CPU Usage: Show CPU usage information."
    echo "   5) Check Temperature: Check system temperature."
    echo "2) Network Tools"
    echo "   1) Network Info: Display network interfaces and IP addresses."
    echo "   2) Ping: Ping a specified host."
    echo "   3) Speed Test: Run a speed test to measure network performance."
    echo "   4) Open Ports: List open ports on the system."
    echo "3) File Management"
    echo "   1) Backup: Create a backup of a directory."
    echo "   2) Restore: Restore a backup to a specified directory."
    echo "   3) Compress: Compress a file into a .tar.gz archive."
    echo "   4) Decompress: Decompress a .tar.gz archive."
    echo "   5) Find Large Files: List the largest files in a directory."
    echo "4) Package Management"
    echo "   1) Search Package: Search for a package in the package manager."
    echo "   2) Install Package: Install a package using the package manager."
    echo "5) Git Tools"
    echo "   1) Git Status: Show the status of the Git repository."
    echo "   2) Git Pull: Pull changes from the remote repository."
    echo "   3) Git Push: Push changes to the remote repository."
    echo "   4) Git Log: Show the Git commit history."
    echo "   5) Git Branch: List Git branches."
    echo "   6) Checkout Branch: Checkout a specific Git branch."
    echo "6) System Management"
    echo "   1) System Update: Update the system."
    echo "   2) Clear Cache: Clear the package manager cache."
    echo "   3) Remove Old Kernels: Remove old kernels from the system."
    echo "7) Security Tools"
    echo "   1) Firewall Status: Show the status of the firewall."
    echo "   2) Enable SSH: Enable SSH service in the firewall."
    echo "   3) Disable SSH: Disable SSH service in the firewall."
    echo "8) Web Tools"
    echo "   1) Google Search: Perform a Google search and open in the browser."
    echo "   2) Spotify Search: Perform a Spotify search and open in the browser."
    echo "   3) YouTube Search: Perform a YouTube search and open in the browser."
    echo "0) Exit: Exit the script."
}

# end me plz(can someone random plzzzz fix not me im not fixing the code to make it readable)
main_menu() {
    while true; do
        display_title
        display_menu
        read -p "Choose a category: " cat
        case $cat in
            1) echo -e "1) System Info\n2) Disk Usage\n3) Memory Usage\n4) CPU Usage\n5) Check Temperature"; read -p "Choose tool: " tool; system_monitoring $tool ;;
            2) echo -e "1) Network Info\n2) Ping\n3) Speed Test\n4) Open Ports"; read -p "Choose tool: " tool; network_tools $tool ;;
            3) echo -e "1) Backup\n2) Restore\n3) Compress\n4) Decompress\n5) Find Large Files"; read -p "Choose tool: " tool; file_management $tool ;;
            4) echo -e "1) Search Package\n2) Install Package"; read -p "Choose tool: " tool; package_management $tool ;;
            5) echo -e "1) Git Status\n2) Git Pull\n3) Git Push\n4) Git Log\n5) Git Branch\n6) Checkout Branch"; read -p "Choose tool: " tool; git_tools $tool ;;
            6) echo -e "1) System Update\n2) Clear Cache\n3) Remove Old Kernels"; read -p "Choose tool: " tool; system_management $tool ;;
            7) echo -e "1) Firewall Status\n2) Enable SSH\n3) Disable SSH"; read -p "Choose tool: " tool; security_tools $tool ;;
            8) echo -e "1) Google Search\n2) Spotify Search\n3) YouTube Search"; read -p "Choose tool: " tool; web_tools $tool ;;
            0) exit 0 ;;
            h) display_help ;; # Display help menu
            *) echo "Invalid category" ;;
        esac
        read -p "Press Enter to return to the main menu or Ctrl+C to exit."
    done
}

# runs shit
load_config
detect_package_manager
main_menu
